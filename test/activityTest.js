const test = require('ava')
const nock = require('nock')

const config = require('../config')
const Client = require('../lib/client')

test('activity', async t => {
	let activityData = {
		"data": [
	    {
	      "class_5_min": "000000000000000000000000000000000000000000000000000000000000000000000000003444544444445545455443454554454443334333322330000000000232232222222232222222322223222000000022332233422333222232233333222222222222222332223212233222122221111111111111121111111111111111111111111111111111111111111111",
	      "score": 82,
	      "active_calories": 1222,
	      "average_met_minutes": 1.90625,
	      "contributors": {
	        "meet_daily_targets": 43,
	        "move_every_hour": 100,
	        "recovery_time": 100,
	        "stay_active": 98,
	        "training_frequency": 71,
	        "training_volume": 98
	      },
	      "equivalent_walking_distance": 20122,
	      "high_activity_met_minutes": 444,
	      "high_activity_time": 3000,
	      "inactivity_alerts": 0,
	      "low_activity_met_minutes": 117,
	      "low_activity_time": 10020,
	      "medium_activity_met_minutes": 391,
	      "medium_activity_time": 6060,
	      "met": {
	        "interval": 60,
	        "items": [ 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1,0.1,0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 2, 1.9, 1.4, 1.3, 1.3, 2.8, 3.5, 3.4, 3.8, 5.3, 5.4, 3.4, 1.5, 2.7, 9.1, 4.1, 5.3, 4.8, 5.8, 3.5, 5.6, 5.7, 5.4, 5.6, 12.1, 9.3, 5.7, 5.6, 3.5, 5.3, 5.1, 5.1, 5, 5.4, 5.4, 5.9, 5.4, 5, 5.4, 5, 5, 7.4, 5.8, 4.5, 2.7, 1.3, 5.8, 6.4, 3.4, 7.7, 3.9, 3.1, 3.9, 9, 4.7, 4.8, 5.7, 6.1, 4.4, 5.6, 7.4, 6.7, 11.4, 14.6, 14, 4, 1.7, 4.4, 7, 15, 11.7, 5.4, 3, 4.8, 4.8, 5, 7.9, 13.8, 8.9, 6.3, 2.2, 5.1, 8.6, 4.4, 7.6, 7.7, 7, 11.5, 8.3, 12, 14.2, 8.9, 5.1, 5.4, 5, 11.9, 9.7, 5.1, 5, 4.8, 6.3, 5, 5, 5.3, 7.8, 3.9, 1.4, 2, 1.6, 2.9, 4.8, 5.1, 3.8, 1.9, 9.8, 11.4, 14.6, 14.8, 12.4, 9.8, 13.6, 9.8, 9.8, 9.8, 9.8, 9.8, 9.8, 15.2, 13.4, 13.4, 10.5, 9.8, 13, 14.4, 4.6, 2, 5.6, 4.8, 5.6, 8.2, 9.5, 5.4, 5.9, 6.7, 3.8, 6.3, 6.2, 10.9, 7.9, 3.6, 10.3, 10.1, 8.3, 8.3, 4.3, 2.6, 2.5, 4.1, 2.4, 6.3, 3.6, 7, 8.8, 5.4, 6.2, 5.8, 3.2, 1.7, 1.9, 1.9, 1.4, 1.9, 1.5, 1.9, 1.9, 1.6, 1.7, 1.9, 1.9, 1.8, 2.8, 6.8, 4.5, 3.2, 1.8, 2.1, 1.9, 1.9, 1.7, 1.9, 1.7, 1.6, 1.5, 1.7, 2, 1.7, 1.9, 3.8, 3.9, 2.3, 3.3, 5.1, 1.9, 1.7, 1.6, 1.6, 1.5, 1.7, 1.9, 1.7, 1.5, 1.7, 2, 1.7, 1.2, 1.4, 2.2, 3.2, 2.4, 1.2, 1.1, 1.2, 1.4, 1.7, 3.8, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 1.3, 1.6, 1.6, 1.8, 1.9, 1.5, 1.4, 1.7, 1.7, 1.8, 1.5, 1.5, 1.7, 1.5, 1.8, 1.5, 1.5, 1.5, 2.7, 3.4, 1.5, 1.7, 1.4, 1.4, 1.5, 1.5, 1.6, 1.4, 1.7, 1.6, 1.5, 1.5, 1.4, 1.5, 1.5, 1.5, 1.5, 1.6, 1.5, 1.5, 1.5, 1.5, 1.4, 1.5, 1.5, 1.7, 1.5, 1.5, 1.5, 1.6, 1.5, 1.3, 1.6, 1.5, 1.5, 1.4, 1.4, 1.4, 1.5, 1.5, 1.5, 1.4, 1.4, 1.5, 1.5, 2.3, 2.3, 1.8, 1.5, 1.5, 1.6, 1.5, 1.5, 1.6, 1.5, 1.6, 1.4, 1.4, 1.5, 1.7, 1.4, 1.4, 1.3, 1.3, 1.3, 1.3, 1.5, 1.4, 1.4, 1.4, 1.4, 1.7, 1.5, 1.6, 1.8, 1.6, 1.4, 1.4, 1.6, 1.4, 1.8, 1.4, 1.7, 1.5, 1.5, 1.5, 2.2, 2.3, 2.4, 1.5, 1.3, 1.4, 1.5, 1.4, 1.4, 1.4, 1.6, 1.5, 1.4, 1.4, 1.4, 2.2, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.5, 1.7, 1.8, 1.9, 1.6, 1.4, 1.8, 1.2, 1.6, 1.2, 1.2, 2, 1.4, 1.2, 1.5, 1.5, 1.3, 1.3, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 2, 1.8, 1.6, 1.6, 1.7, 1.3, 1.6, 1.3, 1.3, 1.5, 1.3, 1.5, 2.3, 2.7, 3, 2.9, 4, 2.2, 1.9, 1.9, 1.3, 1.3, 1.5, 1.4, 1.4, 1.3, 1.2, 1.4, 1.7, 1.3, 1.6, 1.3, 1.8, 2.1, 1.3, 1.7, 1.6, 1.1, 1.4, 1.3, 1.3, 4.6, 5.3, 1.5, 1.3, 1.3, 1.4, 1.7, 1.4, 1.8, 1.7, 1.4, 1.4, 1.3, 1.6, 1.9, 1.8, 1.9, 6.2, 3.4, 1.9, 1.9, 3, 1.9, 1.7, 3.4, 1.9, 2.1, 2.9, 1.3, 1.1, 1.6, 1.6, 1.5, 1.4, 1.3, 1.9, 1.3, 1.4, 1.5, 1.6, 1.7, 2.3, 1.7, 1.5, 1.5, 1.3, 1.2, 1.3, 1.2, 1.4, 1.4, 1.4, 1.7, 1.9, 1.9, 1.3, 1.7, 1.7, 1.5, 1.5, 1.9, 1.5, 1.3, 1.4, 1.5, 1.4, 1.5, 1.3, 1.6, 3.1, 1.6, 1.8, 1.4, 1.9, 4.3, 2.9, 1.9, 1.3, 1.7, 1.5, 1.9, 1.4, 1.9, 3.2, 2.3, 1.9, 1.7, 1.7, 1.9, 1.5, 1.3, 1.5, 1.5, 1.5, 1.4, 1.9, 1.5, 1.4, 1.4, 1.3, 1.5, 1.6, 1.4, 1.5, 1.6, 1.6, 1.5, 1.5, 1.3, 1.5, 1.5, 1.7, 1.7, 1.5, 1.3, 1.5, 1.3, 1.4, 1.3, 1.5, 1.4, 1.5, 1.5, 1.5, 1.7, 1.7, 1.7, 1.3, 1.3, 1.4, 1.4, 1.4, 1.5, 1.4, 1.5, 1.4, 1.3, 1.3, 1.5, 1.2, 1.4, 1.6, 1.3, 1.4, 1.3, 1.3, 1.4, 1.5, 1.9, 1.3, 1.3, 1.3, 1.3, 1.4, 1.3, 1.3, 1.5, 1.7, 1.3, 1.5, 1.4, 1.4, 1.5, 1.6, 1.4, 1.4, 1.6, 2.3, 2.7, 4.8, 1.9, 2.7, 1.8, 1.7, 1.4, 1.4, 1.3, 1.2, 1.2, 1.3, 1.2, 1.6, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.3, 1.9, 4.4, 1.7, 1.4, 1.2, 1.3, 1.2, 1.2, 1.2, 1.1, 0.9, 1, 0.9, 1, 0.9, 1.3, 1.1, 0.9, 0.9, 1.3, 1.3, 1, 0.9, 1, 1.3, 1.7, 3.5, 2.9, 1.4, 2.1, 4.1, 2.7, 1.1, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.2, 1.1, 0.9, 1.1, 0.9, 1.6, 1.2, 1, 0.9, 1, 1.2, 0.9, 0.9, 1.1, 1.1, 1.2, 1, 1.2, 0.9, 0.9, 0.9, 1.1, 1.8, 1.2, 1.3, 1.4, 1.4, 1.2, 1.2, 1.2, 1.2, 1, 0.9, 0.9, 0.9, 0.9, 1.6, 0.9, 0.9, 0.9, 1, 1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 1.3, 1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.2, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 1, 1.3, 1.3, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 1.1, 1.1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.3, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1, 0.9, 0.9, 0.9, 1.2, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 1, 1.1, 1.2, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 1.1, 0.9, 0.9, 0.9, 0.9, 1, 0.9, 0.9, 1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 1.1, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9],
	        "timestamp": "2021-11-26T04:00:00.000-08:00"
	      },
	      "meters_to_target": -16200,
	      "non_wear_time": 27480,
	      "resting_time": 18840,
	      "sedentary_met_minutes": 10,
	      "sedentary_time": 21000,
	      "steps": 18430,
	      "target_calories": 350,
	      "target_meters": 7000,
	      "total_calories": 3446,
	      "day": "2021-11-26",
	      "timestamp": "2021-11-26T04:00:00-08:00"
	    }
	  ],
	  "next_token": null
	}

  let endpoint = nock(config.baseUrl)
    .get('/v2/usercollection/daily_activity?start_date=2021-11-26&end_date=2021-11-27')
    .reply(200, JSON.stringify(activityData))

  const client = new Client('token')
	const activity = await client.activity('2021-11-26', '2021-11-27')

  t.is(activity.data[0].day, '2021-11-26')
  t.is(activity.data[0].met.items[1], 0.1)

})
